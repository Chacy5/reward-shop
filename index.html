<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Reward Shop</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat+Alternates:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      font-family: 'Montserrat Alternates', sans-serif;
      margin: 0;
      padding: 20px;
      background: #eafff8;
      color: #333;
      padding-bottom: 70px;
    }

    h1,
    h2 {
      color: #065f54;
    }

    .section {
      background: #ffffff;
      padding: 16px;
      border-radius: 16px;
      margin-bottom: 20px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    }

    .counter {
      font-size: 1.5rem;
      font-weight: bold;
      text-align: center;
      background: #b2fff0;
      padding: 20px;
      border-radius: 16px;
      margin-bottom: 20px;
    }

    input,
    button,
    select {
      font-size: 1rem;
      padding: 10px;
      margin: 6px 0;
      border: 1px solid #ccc;
      border-radius: 12px;
      width: 100%;
    }

    button {
      background: #6fedd1;
      color: #fff;
      font-weight: bold;
      border: none;
      cursor: pointer;
      transition: background-color 0.2s ease, transform 0.1s ease;
    }

    button:active {
      transform: scale(0.97);
      background-color: #57e1c0;
    }

    .card {
      background: #f0fffa;
      border-left: 6px solid #6fedd1;
      border-radius: 10px;
      padding: 12px;
      margin: 10px 0;
      opacity: 0;
      transform: translateY(10px);
      animation: fadeInUp 0.4s ease forwards;
    }

    .card.daily {
      border-left-color: #6fedd1;
    }

    .card.weekly {
      border-left-color: #fdd36a;
    }

    .card.event {
      border-left-color: #ff9edb;
    }

    .desc {
      font-size: 0.9rem;
      color: #555;
    }

    .flex {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
    }

    nav a {
      flex: 1;
      text-align: center;
      padding: 10px;
      text-decoration: none;
      color: #065f54;
      font-weight: bold;
    }

    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: #ffffff;
      border-top: 1px solid #ccc;
      display: flex;
      justify-content: space-around;
      z-index: 1000;
    }

    .bottom-nav a.active {
      background: #e0fff8;
      border-top: 3px solid #6fedd1;
    }

    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    html {
      scroll-behavior: smooth;
    }

    .loader {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(255, 255, 255, 0.8);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      font-size: 1.2rem;
      font-weight: bold;
      color: #065f54;
    }
  </style>
</head>
<body>
  <div class="loader" id="loader">–ó–∞–≥—Ä—É–∑–∫–∞...</div>

  <nav class="bottom-nav">
    <a href="#main" id="nav-main" class="active">üè† –ì–ª–∞–≤–Ω–∞—è</a>
    <a href="#rewardList" id="nav-reward">üè™ –ú–∞–≥–∞–∑–∏–Ω</a>
    <a href="#completed" id="nav-completed">‚úÖ –ó–∞–¥–∞–Ω–∏—è</a>
    <a href="#claimed" id="nav-claimed">üéâ –ù–∞–≥—Ä–∞–¥—ã</a>
  </nav>

  <div class="counter">
    –õ–∞–ø–∫–∏: <span id="points">0</span>
  </div>

  <div id="main">
    <div class="section">
      <h2>üìù –ù–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ</h2>
      <select id="questType">
        <option value="daily">–ï–∂–µ–¥–Ω–µ–≤–Ω–æ–µ</option>
        <option value="weekly">–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–µ</option>
        <option value="event">–°–æ–±—ã—Ç–∏–µ</option>
      </select>
      <input type="text" id="taskName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" />
      <input type="text" id="taskDesc" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ" />
      <input type="number" id="taskPoints" placeholder="–ù–∞–≥—Ä–∞–¥–∞ (–ª–∞–ø–∫–∏)" />
      <button onclick="addTask()">–î–æ–±–∞–≤–∏—Ç—å</button>
    </div>

    <div class="section">
      <h2>üìã –ó–∞–¥–∞–Ω–∏—è</h2>
      <div id="questLists"></div>
    </div>

    <div class="section">
      <h2>üéÅ –ù–æ–≤–∞—è –Ω–∞–≥—Ä–∞–¥–∞</h2>
      <input type="text" id="rewardName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –Ω–∞–≥—Ä–∞–¥—ã" />
      <input type="text" id="rewardDesc" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ" />
      <input type="number" id="rewardCost" placeholder="–°—Ç–æ–∏–º–æ—Å—Ç—å (–ª–∞–ø–∫–∏)" />
      <button onclick="addReward()">–î–æ–±–∞–≤–∏—Ç—å</button>
    </div>

    <div class="section" id="rewardListSection">
      <h2>üè™ –ú–∞–≥–∞–∑–∏–Ω –Ω–∞–≥—Ä–∞–¥</h2>
      <div id="rewardList"></div>
    </div>
  </div>

  <div class="section" id="completed">
    <h2>‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è</h2>
    <div id="completedList"></div>
  </div>

  <div class="section" id="claimed">
    <h2>üéâ –ü—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã</h2>
    <div id="claimedList"></div>
  </div>

  <script>
    let points = parseInt(localStorage.getItem('pawPoints') || '0');
    let quests = JSON.parse(localStorage.getItem('pawQuests') || '[]');
    let completed = JSON.parse(localStorage.getItem('pawCompleted') || '[]');
    let rewards = JSON.parse(localStorage.getItem('pawRewards') || '[]');
    let claimed = JSON.parse(localStorage.getItem('pawClaimed') || '[]');

    function saveAll() {
      localStorage.setItem('pawPoints', points);
      localStorage.setItem('pawQuests', JSON.stringify(quests));
      localStorage.setItem('pawCompleted', JSON.stringify(completed));
      localStorage.setItem('pawRewards', JSON.stringify(rewards));
      localStorage.setItem('pawClaimed', JSON.stringify(claimed));
    }

    function updatePoints() {
      document.getElementById('points').innerText = points;
      saveAll();
    }

    function addTask() {
      const type = document.getElementById('questType').value;
      const name = document.getElementById('taskName').value.trim();
      const desc = document.getElementById('taskDesc').value.trim();
      const pts = parseInt(document.getElementById('taskPoints').value);
      if (!name || isNaN(pts)) return alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∑–∞–¥–∞–Ω–∏—è.');

      const createdAt = new Date().toISOString();
      quests.push({ type, name, desc, pts, createdAt });
      renderQuests();

      document.getElementById('taskName').value = '';
      document.getElementById('taskDesc').value = '';
      document.getElementById('taskPoints').value = '';
      saveAll();
    }

    function completeTask(index) {
      const q = quests[index];
      points += q.pts;
      completed.push({ ...q, completedAt: new Date().toISOString() });
      quests.splice(index, 1);
      renderQuests();
      renderCompleted();
      updatePoints();
    }

    function deleteQuest(index) {
      if (confirm('–£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ?')) {
        quests.splice(index, 1);
        renderQuests();
        saveAll();
      }
    }

    function renderQuests() {
      const container = document.getElementById('questLists');
      container.innerHTML = '';
      ['daily', 'weekly', 'event'].forEach((type) => {
        const filtered = quests.filter(q => q.type === type);
        if (filtered.length === 0) return;
        const h = document.createElement('h3');
        h.textContent = type === 'daily' ? '–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ' : type === 'weekly' ? '–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ' : '–°–æ–±—ã—Ç–∏—è';
        container.appendChild(h);
        filtered.forEach((q, i) => {
          const globalIndex = quests.indexOf(q);
          const card = document.createElement('div');
          card.className = 'card ' + type;
          card.innerHTML = `
            <div class="flex">
              <div>
                <b>${q.name}</b> <span>(${q.pts} –ª–∞–ø–æ–∫)</span>
                <p class="desc">${q.desc || ''}</p>
              </div>
              <div>
                <button onclick="completeTask(${globalIndex})" title="–í—ã–ø–æ–ª–Ω–∏—Ç—å">‚úîÔ∏è</button>
                <button onclick="deleteQuest(${globalIndex})" title="–£–¥–∞–ª–∏—Ç—å">‚ùå</button>
              </div>
            </div>
          `;
          container.appendChild(card);
        });
      });
      saveAll();
    }

    function renderCompleted() {
      const container = document.getElementById('completedList');
      container.innerHTML = '';
      if (completed.length === 0) {
        container.innerHTML = '<p>–ü–æ–∫–∞ –Ω–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π.</p>';
        return;
      }
      completed.forEach(q => {
        const card = document.createElement('div');
        card.className = 'card daily';
        card.innerHTML = `
          <b>${q.name}</b> <span>(${q.pts} –ª–∞–ø–æ–∫)</span>
          <p class="desc">${q.desc || ''}</p>
          <small>–í—ã–ø–æ–ª–Ω–µ–Ω–æ: ${new Date(q.completedAt).toLocaleString()}</small>
        `;
        container.appendChild(card);
      });
    }

    function addReward() {
      const name = document.getElementById('rewardName').value.trim();
      const desc = document.getElementById('rewardDesc').value.trim();
      const cost = parseInt(document.getElementById('rewardCost').value);
      if (!name || isNaN(cost)) return alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –Ω–∞–≥—Ä–∞–¥—ã.');
      rewards.push({ name, desc, cost });
      renderRewards();

      document.getElementById('rewardName').value = '';
      document.getElementById('rewardDesc').value = '';
      document.getElementById('rewardCost').value = '';
      saveAll();
    }

    function renderRewards() {
      const container = document.getElementById('rewardList');
      container.innerHTML = '';
      if (rewards.length === 0) {
        container.innerHTML = '<p>–ü–æ–∫–∞ –Ω–µ—Ç –Ω–∞–≥—Ä–∞–¥ –≤ –º–∞–≥–∞–∑–∏–Ω–µ.</p>';
        return;
      }
      rewards.forEach((r, i) => {
        const card = document.createElement('div');
        card.className = 'card event';
        card.innerHTML = `
          <b>${r.name}</b> <span>(${r.cost} –ª–∞–ø–æ–∫)</span>
          <p class="desc">${r.desc || ''}</p>
          <button onclick="claimReward(${i})" ${points < r.cost ? 'disabled style="opacity:0.6;cursor:not-allowed"' : ''}>–ö—É–ø–∏—Ç—å</button>
        `;
        container.appendChild(card);
      });
    }

    function claimReward(index) {
      const r = rewards[index];
      if (points < r.cost) return alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∞–ø–æ–∫ –¥–ª—è –ø–æ–∫—É–ø–∫–∏.');
      points -= r.cost;
      claimed.push({ ...r, claimedAt: new Date().toISOString() });
      renderClaimed();
      updatePoints();
      renderRewards();
      saveAll();
    }

    function renderClaimed() {
      const container = document.getElementById('claimedList');
      container.innerHTML = '';
      if (claimed.length === 0) {
        container.innerHTML = '<p>–ü–æ–∫–∞ –Ω–µ—Ç –ø—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω–Ω—ã—Ö –Ω–∞–≥—Ä–∞–¥.</p>';
        return;
      }
      claimed.forEach(r => {
        const card = document.createElement('div');
        card.className = 'card weekly';
        card.innerHTML = `
          <b>${r.name}</b>
          <p class="desc">${r.desc || ''}</p>
          <small>–ö—É–ø–ª–µ–Ω–æ: ${new Date(r.claimedAt).toLocaleString()}</small>
        `;
        container.appendChild(card);
      });
    }

    function init() {
      updatePoints();
      renderQuests();
      renderCompleted();
      renderRewards();
      renderClaimed();
      document.getElementById('loader').style.display = 'none';
    }

    window.onload = init;

    // –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —è–∫–æ—Ä—è–º, —á—Ç–æ–±—ã –º–µ–Ω—è—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å
    const navLinks = document.querySelectorAll('.bottom-nav a');
    navLinks.forEach(link => {
      link.addEventListener('click', () => {
        navLinks.forEach(l => l.classList.remove('active'));
        link.classList.add('active');
      });
    });
  </script>
</body>
</html>
