<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Reward Shop</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat+Alternates:wght@400;600&display=swap" rel="stylesheet">
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      font-family: 'Montserrat Alternates', sans-serif;
      margin: 0;
      padding: 20px;
      background: #eafff8;
      color: #333;
    }

    h1, h2 {
      color: #065f54;
    }

    .section {
      background: #ffffff;
      padding: 16px;
      border-radius: 16px;
      margin-bottom: 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    }

    .counter {
      font-size: 1.5rem;
      font-weight: bold;
      text-align: center;
      background: #b2fff0;
      padding: 20px;
      border-radius: 16px;
      margin-bottom: 20px;
    }

    input, button, select {
      font-size: 1rem;
      padding: 10px;
      margin: 6px 0;
      border: 1px solid #ccc;
      border-radius: 12px;
      width: 100%;
    }

    button {
      background: #6fedd1;
      color: #fff;
      font-weight: bold;
      border: none;
      cursor: pointer;
    }

    .card {
      background: #f0fffa;
      border-left: 6px solid #6fedd1;
      border-radius: 10px;
      padding: 12px;
      margin: 10px 0;
    }

    .desc {
      font-size: 0.9rem;
      color: #555;
    }

    .flex {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
    }

    nav a {
      margin-right: 10px;
      text-decoration: none;
      color: #065f54;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <nav>
    <a href="#main">üè† –ì–ª–∞–≤–Ω–∞—è</a>
    <a href="#completed">‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ</a>
    <a href="#claimed">üéÅ –ü—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω–Ω—ã–µ</a>
  </nav>

  <div class="counter">
    –õ–∞–ø–∫–∏: <span id="points">0</span>
  </div>

  <div id="main">
    <div class="section">
      <h2>üìù –ù–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ</h2>
      <select id="questType">
        <option value="daily">–ï–∂–µ–¥–Ω–µ–≤–Ω–æ–µ</option>
        <option value="weekly">–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–µ</option>
        <option value="event">–°–æ–±—ã—Ç–∏–µ</option>
      </select>
      <input type="text" id="taskName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ">
      <input type="text" id="taskDesc" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ">
      <input type="number" id="taskPoints" placeholder="–ù–∞–≥—Ä–∞–¥–∞ (–ª–∞–ø–∫–∏)">
      <button onclick="addTask()">–î–æ–±–∞–≤–∏—Ç—å</button>
    </div>

    <div class="section">
      <h2>üìã –ó–∞–¥–∞–Ω–∏—è</h2>
      <div id="questLists"></div>
    </div>

    <div class="section">
      <h2>üéÅ –ù–æ–≤–∞—è –Ω–∞–≥—Ä–∞–¥–∞</h2>
      <input type="text" id="rewardName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –Ω–∞–≥—Ä–∞–¥—ã">
      <input type="text" id="rewardDesc" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ">
      <input type="number" id="rewardCost" placeholder="–°—Ç–æ–∏–º–æ—Å—Ç—å (–ª–∞–ø–∫–∏)">
      <button onclick="addReward()">–î–æ–±–∞–≤–∏—Ç—å</button>
    </div>

    <div class="section">
      <h2>üè™ –ú–∞–≥–∞–∑–∏–Ω –Ω–∞–≥—Ä–∞–¥</h2>
      <div id="rewardList"></div>
    </div>
  </div>

  <div class="section" id="completed">
    <h2>‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è</h2>
    <div id="completedList"></div>
  </div>

  <div class="section" id="claimed">
    <h2>üéâ –ü—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã</h2>
    <div id="claimedList"></div>
  </div>

  <script>
    let points = parseInt(localStorage.getItem('pawPoints') || '0');
    let quests = JSON.parse(localStorage.getItem('pawQuests') || '[]');
    let completed = JSON.parse(localStorage.getItem('pawCompleted') || '[]');
    let rewards = JSON.parse(localStorage.getItem('pawRewards') || '[]');
    let claimed = JSON.parse(localStorage.getItem('pawClaimed') || '[]');

    function saveAll() {
      localStorage.setItem('pawPoints', points);
      localStorage.setItem('pawQuests', JSON.stringify(quests));
      localStorage.setItem('pawCompleted', JSON.stringify(completed));
      localStorage.setItem('pawRewards', JSON.stringify(rewards));
      localStorage.setItem('pawClaimed', JSON.stringify(claimed));
    }

    function updatePoints() {
      document.getElementById('points').innerText = points;
      saveAll();
    }

    function addTask() {
      const type = document.getElementById('questType').value;
      const name = document.getElementById('taskName').value;
      const desc = document.getElementById('taskDesc').value;
      const pts = parseInt(document.getElementById('taskPoints').value);
      if (!name || isNaN(pts)) return;

      quests.push({ type, name, desc, pts });
      renderQuests();
    }

    function completeTask(index) {
      const q = quests[index];
      points += q.pts;
      completed.push(q);
      quests.splice(index, 1);
      renderQuests();
      renderCompleted();
      updatePoints();
    }

    function claimReward(index) {
      const r = rewards[index];
      if (points >= r.cost) {
        points -= r.cost;
        claimed.push({ ...r, done: false });
        updatePoints();
        renderClaimed();
      }
    }

    function markRewardDone(index) {
      claimed[index].done = true;
      renderClaimed();
    }

    function renderQuests() {
      const container = document.getElementById('questLists');
      container.innerHTML = '';
      ['daily','weekly','event'].forEach(type => {
        const title = { daily: '–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ', weekly: '–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ', event: '–°–æ–±—ã—Ç–∏—è' }[type];
        const filtered = quests.filter(q => q.type === type);
        if (filtered.length) {
          container.innerHTML += `<h3>${title}</h3>`;
          filtered.forEach((q, i) => {
            container.innerHTML += `
              <div class="card">
                <div class="flex">
                  <div><strong>${q.name}</strong><div class="desc">${q.desc}</div></div>
                  <button onclick="completeTask(${quests.indexOf(q)})">+${q.pts}</button>
                </div>
              </div>`;
          });
        }
      });
      saveAll();
    }

    function renderCompleted() {
      const list = document.getElementById('completedList');
      list.innerHTML = completed.map(q => `
        <div class="card">
          <strong>${q.name}</strong>
          <div class="desc">${q.desc}</div>
        </div>`).join('');
      saveAll();
    }

    function renderRewards() {
      const list = document.getElementById('rewardList');
      list.innerHTML = rewards.map((r, i) => `
        <div class="card">
          <div class="flex">
            <div><strong>${r.name}</strong><div class="desc">${r.desc}</div></div>
            <button onclick="claimReward(${i})" ${points < r.cost ? 'disabled' : ''}>-${r.cost}</button>
          </div>
        </div>`).join('');
      saveAll();
    }

    function renderClaimed() {
      const list = document.getElementById('claimedList');
      list.innerHTML = claimed.map((r, i) => `
        <div class="card">
          <div class="flex">
            <div><strong>${r.name}</strong><div class="desc">${r.desc}</div></div>
            ${r.done ? '‚úÖ' : `<button onclick="markRewardDone(${i})">–í—ã–ø–æ–ª–Ω–µ–Ω–æ</button>`}
          </div>
        </div>`).join('');
      saveAll();
    }

    updatePoints();
    renderQuests();
    renderCompleted();
    renderRewards();
    renderClaimed();
  </script>
</body>
</html>
